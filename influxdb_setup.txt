Инструкции по настройке InfluxDB v3 Core для импорта логов Nginx.

InfluxDB v3 использует иную модель конфигурации по сравнению с v2. Вместо "бакетов" (buckets) теперь используются "базы данных" (databases).

### Шаги по настройке:

1.  **Получите URL вашего хоста InfluxDB:**
    Это адрес, по которому доступен ваш инстанс InfluxDB. Например, `http://localhost:8086` или облачный URL.

2.  **Создайте базу данных (если необходимо):**
    Вам нужна база данных для хранения логов. Если у вас ее еще нет, вы можете создать ее с помощью `influx3` CLI или через пользовательский интерфейс, если он доступен.
    ```sh
    influx3 database create --database-name nginx_logs
    ```

3.  **Создайте токен доступа:**
    Для записи данных в базу данных требуется токен с правами на запись. Токены можно создавать и управлять ими через `influx3` CLI.
    ```sh
    # Пример создания токена с правами на запись для базы данных 'nginx_logs'
    influx3 acl create \
      --description "Токен для импортера логов Nginx" \
      --permission write \
      --database nginx_logs
    ```
    После выполнения этой команды вы получите токен. **Обязательно скопируйте и сохраните его**, так как вы не сможете увидеть его снова.

4.  **Настройте файл `.env`:**
    Откройте файл `.env` в корне проекта и убедитесь, что следующие переменные установлены правильно:
    ```dotenv
    # URL вашего инстанса InfluxDB v3
    INFLUXDB_URL=http://localhost:8086

    # Ваш сгенерированный токен доступа
    INFLUXDB_TOKEN=YOUR_GENERATED_API_TOKEN

    # Имя вашей организации (если применимо, для облачных версий)
    INFLUXDB_ORG=YOUR_ORG

    # Имя базы данных, которую вы создали
    INFLUXDB_DATABASE=nginx_logs
    ```

После выполнения этих шагов ваш скрипт `influxdb_importer.php` будет готов к отправке данных в InfluxDB v3.
